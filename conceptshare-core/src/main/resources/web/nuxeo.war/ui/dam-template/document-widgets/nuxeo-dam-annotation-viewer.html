<dom-module id="nuxeo-dam-annotation-viewer">

  <template>
    <style>
      :host {
        display: block;
        @apply(--nuxeo-pdf-viewer-layout);
      }

      iframe {
        width: 100%;
        height: 100%;
        border: 0;
        @apply(--nuxeo-pdf-viewer-iframe);
      }
    </style>

    <iframe src$="[[_path(docId)]]"></iframe>

  </template>

</dom-module>

<script>

Polymer({

  is: 'nuxeo-dam-annotation-viewer',

  properties: {

    /**
       * The path to the pdf file to display.
       */
    src: {
      type: String
    },

    docId: {
      type:String
    }

  },

  _path: function(file) {
    // get an absolute href
    file = this.create("a", {href: file}).href;
    //return this.resolveUrl('../../../pdfviewer/generic/annotationeer/viewer.html?file=' + file);
    return 'http://dam-solution.cloud.nuxeo.com/nuxeo/pdfviewer/generic/annotationeer/index.html?file=http://dam-solution.cloud.nuxeo.com/nuxeo/site/api/v1/repo/default/id/'+this.docId+'/@rendition/imageToPDF';
  }

});

</script>