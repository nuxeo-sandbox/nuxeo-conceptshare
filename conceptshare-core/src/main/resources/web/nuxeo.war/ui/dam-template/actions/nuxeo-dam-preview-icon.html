<dom-module id="nuxeo-dam-preview-icon">
  <template>
    <style>
      :host {
        display: inline-block;
      }
    </style>

    <template is="dom-if" if="[[_isAvailable(document)]]">
      <paper-icon-button icon="[[icon]]" noink></paper-icon-button>
      <paper-tooltip>[[i18n('previewButton.tooltip')]]</paper-tooltip>
    </template>

  </template>

  <script>
    Polymer({
      is: 'nuxeo-dam-preview-icon',
      behaviors: [Nuxeo.I18nBehavior, Nuxeo.FiltersBehavior],
      properties: {

        /**
         * Input document.
         */
        document: Object,

        /**
         * Path of the file object to preview.
         * For example `xpath="files:files/0/file"`.
         */
        xpath: {
          type: String,
          value: 'file:content'
        },

        /**
         * Icon to use (iconset_name:icon_name).
         */
        icon: {
          type: String,
          value: 'icons:visibility'
        }
      },

      _isAvailable: function(document) {
        return !this.hasFacet(document, 'Folderish');
      }

    });
  </script>

</dom-module>
