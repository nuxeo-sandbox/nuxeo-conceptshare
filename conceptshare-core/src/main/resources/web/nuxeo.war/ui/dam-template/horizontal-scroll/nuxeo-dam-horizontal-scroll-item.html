<dom-module id="nuxeo-dam-horizontal-scroll-item">
  <template>
    <style>
    :host {
    	height: 100%;
    	margin: 0 5px 0 0;
    	padding: 0;
    }
   </style>
   <content id="actual"></content>
  </template>
  <script>
    (function() {
      Polymer({
        is: 'nuxeo-dam-horizontal-scroll-item',
        properties: {},

        ready: function() {
          console.log("-- nuxeo-dam-horizontal-scroll-item ready");
          var context = this;
          Polymer.dom(this.$.actual).observeNodes(function(info) {
              context.updateDimensions();
          });
        },

        updateDimensions:function() {
          var items = this.getContentChildren('#actual');
          if (items.length === 0) return;
          var item = items[0];
          if (item.getImageInfo !== undefined) {
            var image = item.getImageInfo();
            if (!this.offsetParent || !this.offsetParent.offsetHeight) return;
            var height = this.offsetParent.offsetHeight;
            var width = height * image.ratio;
            this.style.width = width+ "px";
            this.style.height = height+ "px";
          }
        }

      });
    })();
  </script>
</dom-module>
