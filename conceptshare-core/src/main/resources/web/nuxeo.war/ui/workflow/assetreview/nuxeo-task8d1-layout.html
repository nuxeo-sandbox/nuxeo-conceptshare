<link rel="import" href="../../dam-template/tasks/nuxeo-dam-task-comments.html">
<!--
`nuxeo-task8d1-layout`
@group Nuxeo UI
@element nuxeo-task8d1-layout
-->
<dom-module id="nuxeo-task8d1-layout">
  <template>
    <style>
      .title {
        margin-top:24px !important;
        margin-bottom:24px !important;
      }

      .layout {
        margin-top: 24px;
        margin-bottom: 24px;
      }

      .layout h3 {
        margin:0 !important;
        padding-right: 16px;
      }

    </style>

    <paper-textarea value="{{task.variables.comment}}" label="My Comment"></paper-textarea>

    <template is="dom-if" if="[[_hasComments(task)]]">
      <h3 class="title">Previous Comments</h3>
      <nuxeo-dam-task-comments task="[[task]]"></nuxeo-dam-task-comments>

      <div class="layout horizontal">
        <h3>Publish</h3>
        <paper-toggle-button checked="{{task.variables.publish}}"></paper-toggle-button>
      </div>
      <template is="dom-if" if="[[task.variables.publish]]">
        <paper-input label="Publish on" type="date" value="{{task.variables.publish_start}}"></paper-input>
        <paper-input label="To" type="date" value="{{task.variables.publish_end}}"></paper-input>
      </template>

    </template>

  </template>

  <script>
  Polymer({
    is: 'nuxeo-task8d1-layout',
    behaviors: [Nuxeo.LayoutBehavior],
    properties: {

      /**
         * @task var_Task8d1
         */
      task: {
        type: Object,
      },

      /**
         * @schema dublincore
         */
      document: {
        type: Object,
      }
    },

    _hasComments: function(task) {
      return task.variables.comments && task.variables.comments.length>0;
    }

  });
  </script>
</dom-module>
